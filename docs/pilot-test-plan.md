# **План приёмочного тестирования Beer Tap System MVP v1.0 (Детализированная версия)**

## 1. Введение

### 1.1. Цель
Этот документ содержит исчерпывающий набор тест-кейсов для проверки всех функциональных и нефункциональных аспектов системы **Beer Tap System**. Цель — выявление, документирование и классификация всех дефектов, несоответствий и узких мест для обеспечения качества и стабильности продукта перед пилотным запуском.

### 1.2. Легенда и руководство по заполнению

> **Статус:** Используйте чекбоксы для отметки.
> *   `[ ]` **To Do** — Тест-кейс ожидает выполнения.
> *   `[✅]` **Pass** — Фактический результат полностью соответствует ожидаемому.
> *   `[❌]` **Fail** — Фактический результат не соответствует ожидаемому.
> *   `[⚠️]` **Blocked** — Тест-кейс не может быть выполнен из-за внешнего фактора или бага в другом модуле.

> **Как заполнять поля:**
> *   **`Фактический результат`**: Краткая и объективная констатация факта. *Пример: "Появилось модальное окно с ошибкой 'Network Error'. Баланс не изменился."*
> *   **`Примечания / Bug ID`**: Если статус `Fail` или `Blocked`, здесь указывается ID задачи/бага из вашего трекера (например, `issues.csv`). Также сюда можно записать важные наблюдения. *Пример: `Bug #17. UI медленно реагирует при списке > 100 гостей.`*

---

## **Модуль 1: Аутентификация, доступ и жизненный цикл приложения**

> **Объект тестирования:** `Login.svelte`, `App.svelte`, `sessionStore.js`, эндпоинт `/api/token`.

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-AUTH-01** | `[ ]` | P1 (Critical) | **Успешный вход в систему** |
| **Предусловия** | Приложение запущено, известны корректные `username` и `password`. |
| **Шаги выполнения** | 1. Ввести корректный `username`. <br> 2. Ввести корректный `password`. <br> 3. Нажать "Log In". |
| **Ожидаемый результат** | Отображается основной интерфейс приложения (Дашборд). |
| **Факт. результат**| |
| **Примечания** | |

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-AUTH-02** | `[ ]` | P1 (Critical) | **Неуспешный вход (неверный пароль)** |
| **Предусловия** | Приложение запущено. |
| **Шаги выполнения** | 1. Ввести корректный `username`. <br> 2. Ввести **некорректный** `password`. <br> 3. Нажать "Log In". |
| **Ожидаемый результат** | 1. Пользователь остаётся на экране входа. <br> 2. Появляется сообщение об ошибке "Incorrect username or password". |
| **Факт. результат**| |
| **Примечания** | |

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-AUTH-03** | `[ ]` | P2 (High) | **Выход из системы (Logout)** |
| **Предусловия** | Пользователь залогинен. |
| **Шаги выполнения** | 1. Нажать кнопку "Log Out" в боковой панели `App.svelte`. |
| **Ожидаемый результат** | 1. Отображается экран входа "Login". <br> 2. `sessionStore` очищен, токен отсутствует. |
| **Факт. результат**| |
| **Примечания** | |

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-APP-01** | `[ ]` | P3 (Medium) | **Управление жизненным циклом фоновых процессов** |
| **Предусловия** | Приложение запущено, открыты DevTools. |
| **Шаги выполнения** | 1. Успешно залогиниться. <br> 2. Проверить консоль. <br> 3. Нажать "Log Out". <br> 4. Проверить консоль. |
| **Ожидаемый результат** | 1. После шага 2 в консоли есть лог `[App.svelte] Компонент смонтирован...`. <br> 2. После шага 4 в консоли есть лог `[App.svelte] Компонент уничтожен...`. |
| **Факт. результат**| |
| **Примечания** | |

---

## **Модуль 2: Управление гостями и финансовые операции**

> **Объект тестирования:** `Guests.svelte` и дочерние компоненты, `guestStore.js`, `NFCModal.svelte`, API `/api/guests/`, `/api/cards/`.

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-GUEST-01** | `[ ]` | P1 (Critical) | **Создание нового гостя (Happy Path)** |
| **Предусловия** | Пользователь залогинен, открыта страница "Guests". |
| **Шаги выполнения** | 1. Нажать "+ New Guest". <br> 2. Ввести валидные `First Name` и `Last Name`. <br> 3. Нажать "Create". |
| **Ожидаемый результат** | 1. Модальное окно закрывается. <br> 2. Новый гость появляется в списке. <br> 3. В `audit_logs` создается запись о создании гостя. |
| **Факт. результат**| |
| **Примечания** | |

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-GUEST-02** | `[ ]` | P2 (High) | **Создание гостя (Негативный сценарий - пустые поля)** |
| **Предусловия** | Пользователь залогинен, открыта страница "Guests". |
| **Шаги выполнения** | 1. Нажать "+ New Guest". <br> 2. Оставить поля пустыми. <br> 3. Нажать "Create". |
| **Ожидаемый результат** | 1. Кнопка "Create" неактивна, ИЛИ <br> 2. Появляется сообщение о необходимости заполнить обязательные поля. <br> 3. Новый гость НЕ создаётся. |
| **Факт. результат**| |
| **Примечания** | |

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-GUEST-03** | `[ ]` | P2 (High) | **Редактирование гостя** |
| **Предусловия** | Существует гость "Иван Петров". |
| **Шаги выполнения** | 1. Выбрать гостя "Иван Петров". <br> 2. Нажать "Edit". <br> 3. Изменить `Last Name` на "Сидоров". <br> 4. Нажать "Save Changes". |
| **Ожидаемый результат** | Имя гостя в списке и в панели деталей обновляется на "Иван Сидоров". |
| **Факт. результат**| |
| **Примечания** | |

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-CARD-01** | `[ ]` | P1 (Critical) | **Привязка новой RFID-карты** |
| **Предусловия** | Существует гость без карт. ACR122 подключен. Есть свободная RFID-карта. |
| **Шаги выполнения** | 1. Выбрать гостя. <br> 2. Нажать "+ Bind Card". <br> 3. Поднести карту к считывателю. |
| **Ожидаемый результат** | В панели деталей гостя появляется UID привязанной карты. |
| **Факт. результат**| |
| **Примечания** | |

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-CARD-02** | `[ ]` | P2 (High) | **Попытка привязки уже занятой RFID-карты** |
| **Предусловия** | Карта `ABCDEF12` привязана к "Гостю А". |
| **Шаги выполнения** | 1. Выбрать "Гостя Б". <br> 2. Нажать "+ Bind Card". <br> 3. Поднести карту `ABCDEF12`. |
| **Ожидаемый результат** | 1. Модальное окно NFC отображает ошибку "Card is already assigned". <br> 2. Карта НЕ привязывается к "Гостю Б". |
| **Факт. результат**| |
| **Примечания** | |

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-FIN-01** | `[ ]` | P1 (Critical) | **Пополнение баланса** |
| **Предусловия** | Существует гость с балансом 0.00. |
| **Шаги выполнения** | 1. Выбрать гостя. <br> 2. Нажать "+ Top Up". <br> 3. Ввести `1500`. <br> 4. Нажать "Save". |
| **Ожидаемый результат** | 1. Баланс гостя в UI мгновенно обновляется на `1500.00`. <br> 2. В `audit_logs` создается запись о пополнении. |
| **Факт. результат**| |
| **Примечания** | |

---

## **Модуль 3: Управление инвентарём и целостность данных**

> **Объект тестирования:** `TapsKegs.svelte` и дочерние компоненты, API `/api/beverages/`, `/api/kegs/`, `/api/taps/`.

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-INV-01** | `[ ]` | P1 (Critical) | **Создание Напитка и Кеги** |
| **Предусловия** | Открыта страница "Taps & Kegs". |
| **Шаги выполнения** | 1. В менеджере напитков создать новый напиток "Cosmic IPA". <br> 2. Нажать "+ New Keg". <br> 3. В форме выбрать "Cosmic IPA", ввести объём. <br> 4. Нажать "Create Keg". |
| **Ожидаемый результат** | 1. В списке напитков появляется "Cosmic IPA". <br> 2. В списке кег появляется новая кега, связанная с этим напитком. |
| **Факт. результат**| |
| **Примечания** | |

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-INV-02** | `[ ]` | P2 (High) | **Назначение кеги на кран** |
| **Предусловия** | Существует свободный кран "Tap 1". Существует полная, не назначенная кега "Cosmic IPA #1". |
| **Шаги выполнения** | 1. На карточке "Tap 1" нажать "Assign Keg". <br> 2. В модальном окне выбрать кегу "Cosmic IPA #1". <br> 3. Нажать "Assign". |
| **Ожидаемый результат** | 1. На карточке "Tap 1" отображается информация о кеге "Cosmic IPA #1". <br> 2. Кнопка меняется на "Unassign Keg". <br> 3. В `audit_logs` создается запись о назначении. |
| **Факт. результат**| |
| **Примечания** | |

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-INV-INT-01**| `[ ]` | P2 (High) | **Целостность данных: Попытка удаления используемого Напитка** |
| **Предусловия** | Напиток "Cosmic IPA" используется в кеге "Cosmic IPA #1". |
| **Шаги выполнения** | 1. В менеджере напитков попытаться удалить "Cosmic IPA". |
| **Ожидаемый результат** | 1. UI отображает ошибку "Cannot delete beverage...". <br> 2. Напиток НЕ удаляется. |
| **Факт. результат**| |
| **Примечания** | |

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-INV-INT-02**| `[ ]` | P2 (High) | **Целостность данных: Попытка удаления назначенной Кеги** |
| **Предусловия** | Кега "Cosmic IPA #1" назначена на "Tap 1". |
| **Шаги выполнения** | 1. В списке кег попытаться удалить "Cosmic IPA #1". |
| **Ожидаемый результат** | 1. UI отображает ошибку "Cannot delete keg...". <br> 2. Кега НЕ удаляется. |
| **Факт. результат**| |
| **Примечания** | |

---

## **Модуль 4: Операционная деятельность и сквозные сценарии**

> **Объект тестирования:** Взаимодействие `RPi Controller`, `Backend` и `Admin App`.

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-E2E-01** | `[ ]` | P1 (Critical) | **Сквозной сценарий: Успешный налив** |
| **Предусловия** | 1. "Гость А", баланс 2000.00. <br> 2. "Кран 1" активен, кега "IPA #1" (5000 мл). <br> 3. Стоимость 500 мл "IPA" = 350.00. |
| **Шаги выполнения** | 1. Сымитировать налив 500 мл "IPA" от "Гостя А" на RPi. |
| **Ожидаемый результат** | 1. **(Дашборд)** В "Ленте наливов" появляется новая запись. <br> 2. **(Гость)** Баланс "Гостя А" становится 1650.00. <br> 3. **(Кран)** Остаток кеги "IPA #1" становится 4500 мл. |
| **Факт. результат**| |
| **Примечания** | |

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-E2E-02** | `[ ]` | P2 (High) | **Граничный сценарий: Налив при недостаточном балансе** |
| **Предусловия** | "Гость Б", баланс 100.00. Стоимость налива 350.00. |
| **Шаги выполнения** | 1. Сымитировать налив от "Гостя Б" на RPi. |
| **Ожидаемый результат** | 1. API `/sync/pours/` возвращает `failed: insufficient_funds`. <br> 2. Запись в "Ленте наливов" НЕ появляется. <br> 3. Баланс "Гостя Б" и остаток кеги НЕ изменяются. |
| **Факт. результат**| |
| **Примечания** | |

---

## **Модуль 5: Безопасность и мониторинг**

> **Объект тестирования:** `Dashboard.svelte`, `systemStore.js`, `nfcReaderStore.js`, `RPi Controller`.

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-SEC-01** | `[ ]` | P1 (Critical) | **Полный цикл Emergency Stop** |
| **Предусловия** | Пользователь залогинен на Дашборде. |
| **Шаги выполнения** | 1. Нажать "Activate Emergency Stop", подтвердить. <br> 2. Сымитировать налив на RPi. <br> 3. Нажать "Deactivate Emergency Stop", подтвердить. <br> 4. Снова сымитировать налив на RPi. |
| **Ожидаемый результат** | 1. После шага 1: в UI появляется глобальный баннер. <br> 2. Шаг 2: налив блокируется контроллером. <br> 3. После шага 3: баннер исчезает. <br> 4. Шаг 4: налив проходит успешно. |
| **Факт. результат**| |
| **Примечания** | |

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-MON-01** | `[ ]` | P2 (High) | **Отказоустойчивость UI при недоступности бэкенда** |
| **Предусловия** | Admin App запущен. |
| **Шаги выполнения** | 1. Остановить Docker-контейнеры бэкенда. <br> 2. Подождать 15-20 секунд. <br> 3. Перезапустить контейнеры. |
| **Ожидаемый результат** | 1. Приложение НЕ падает. <br> 2. На Дашборде виджеты показывают ошибку загрузки. <br> 3. После перезапуска бэкенда виджеты автоматически восстанавливают работу. |
| **Факт. результат**| |
| **Примечания** | |

| ID | Статус | Приоритет | Название |
| :--- | :--- | :--- | :--- |
| **TC-MON-02** | `[ ]` | P2 (High) | **Реакция UI на отключение NFC-считывателя** |
| **Предусловия** | Admin App запущен, ACR122 подключен. |
| **Шаги выполнения** | 1. Физически отключить ACR122 от USB-порта. <br> 2. Подождать 5-10 секунд. <br> 3. Подключить считыватель обратно. |
| **Ожидаемый результат** | 1. После шага 1 виджет статуса NFC на Дашборде меняет статус на "Error". <br> 2. После шага 3 статус виджета возвращается на "Connected". |
| **Факт. результат**| |
| **Примечания** | |