# Executive Summary: Phase 4.1 Completion

**Phase 4.1 of the Beer Tap System project is successfully complete.** This critical phase focused on implementing foundational security and control features, resulting in the delivery of two key functions: **Emergency Stop** and a system-wide **Audit Log**.

The **Emergency Stop** feature provides staff with a "master switch" within the Admin App to instantly disable all beer taps across the venue. This capability is crucial for responding to operational issues, safety concerns, or preventing financial losses. The implementation spans the user interface, backend server, and RPi controllers, ensuring a robust and reliable system-wide lockdown.

The **Audit Log** function introduces a non-intrusive, automatic mechanism that records all significant actions performed by users within the system (e.g., creating guests, topping up balances, managing equipment). This creates an essential layer of accountability and traceability, vital for security, dispute resolution, and future operational analysis.

Completion of this phase transforms the Admin App from a simple management tool into a genuine operational control center. The system is now significantly more secure, resilient, and prepared for comprehensive end-to-end testing before its initial pilot deployment.

---
### **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç 2/6: `docs/diagrams/phase-4.1-architecture.mermaid`**

```mermaid
sequenceDiagram
    participant AdminApp as Admin App (UI)
    participant Rust as Tauri/Rust Layer
    participant Backend as FastAPI Backend
    participant DB as PostgreSQL DB
    participant RPi as RPi Controller

    %% Flow 1: Emergency Stop Activation %%
    Note over AdminApp, RPi: Flow 1: Emergency Stop Activation
    AdminApp->>+Rust: invoke('set_emergency_stop', enabled=true)
    Rust->>+Backend: POST /api/system/emergency_stop
    Note over Backend: get_current_user triggers Audit Log
    Backend->>DB: UPDATE system_states SET value='true'
    Backend-->>-Rust: 200 OK
    Rust-->>-AdminApp: Returns Success
    AdminApp->>AdminApp: Display Global Banner

    %% Flow 2: RPi Controller Checks Status %%
    Note over AdminApp, RPi: Flow 2: RPi Controller Checks Status
    loop Before Every Pour
        RPi->>+Backend: GET /api/system/status
        Backend->>DB: SELECT value FROM system_states
        DB-->>Backend: Returns {key: '...', value: 'true'}
        Backend-->>-RPi: 200 OK {value: 'true'}
        RPi-->>RPi: Block Pour Operation
    end

    %% Flow 3: Audit Log Background Task %%
    Note over AdminApp, RPi: Flow 3: Audit Log on Guest Creation
    AdminApp->>+Rust: invoke('create_guest', ...)
    Rust->>+Backend: POST /api/guests/
    Note over Backend: get_current_user is called
    Backend->>Backend: Adds audit_log_task to BackgroundTasks
    Backend->>DB: INSERT into guests table... (Main Task)
    Backend-->>-Rust: 201 Created
    Rust-->>-AdminApp: Returns new Guest object
    
    par Background Task
        Backend->>DB: INSERT into audit_logs table...
    end
```
---
### **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç 3/6: `docs/phase-4.1-summary.md`**

# Feature Reference & Implementation Summary ‚Äî Phase 4.1: Critical Functions (Emergency Stop & Audit Log)
*   **Version:** 1.0.0
*   **–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2025-10-30
*   **–ê–≤—Ç–æ—Ä(—ã):** AI Assistant (–Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å Gleb Kovalerenko)
*   **–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
    *   **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `glebkovalerenko-ui/beer-tap-system`
    *   **–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞:** –í—Å—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –§–∞–∑—ã 4.1.

## 1. –¶–µ–ª—å –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ñ–∞–∑—ã

–§–∞–∑–∞ 4.1 –±—ã–ª–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ —É–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞ —Å–∏—Å—Ç–µ–º—ã **Beer Tap System** –ø—É—Ç–µ–º –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –¥–≤—É—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–≤—à–∏—Ö –≤ MVP: **Emergency Stop** –∏ **Audit Log**.

*   **Emergency Stop** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –∏ –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º, –ø–æ–∑–≤–æ–ª—è—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–ª–∏–≤–∞ –≤ —Å–ª—É—á–∞–µ –Ω–µ—à—Ç–∞—Ç–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π. –≠—Ç–æ –∫–ª—é—á–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ—Ç–µ—Ä—å –∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
*   **Audit Log** —Å–æ–∑–¥–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π, –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π –∂—É—Ä–Ω–∞–ª –≤—Å–µ—Ö –∑–Ω–∞—á–∏–º—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –ø–æ–¥–æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å, —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ –∏ —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–æ–π –¥–ª—è –±—É–¥—É—â–∏—Ö —Å–∏—Å—Ç–µ–º –∞–Ω–∞–ª–∏–∑–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —ç—Ç–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤—ã–≤–µ–ª–∞ –ø—Ä–æ–µ–∫—Ç –Ω–∞ –Ω–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –∑—Ä–µ–ª–æ—Å—Ç–∏, –ø—Ä–µ–≤—Ä–∞—Ç–∏–≤ –µ–≥–æ –∏–∑ –ø—Ä–æ—Å—Ç–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —É—á—ë—Ç–∞ –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å.

## 2. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–ø–æ —à–∞–≥–∞–º)

### üî¥ 4.1.1 Emergency Stop

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–ª–∏–≤–∞ –≤ —Å–∏—Å—Ç–µ–º–µ.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ:**

*   **Backend (FastAPI):**
    *   **–≠–Ω–¥–ø–æ–∏–Ω—Ç `POST /api/system/emergency_stop`:** –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `{"value": "true"}` –∏–ª–∏ `{"value": "false"}` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ñ–ª–∞–≥–∞. –≠–Ω–¥–ø–æ–∏–Ω—Ç –∑–∞—â–∏—â—ë–Ω JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π.
    *   **–≠–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/system/status`:** –ü—É–±–ª–∏—á–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–ª–∞–≥–∞ (`{"key": "emergency_stop_enabled", "value": "..."}`). –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —á–∞—Å—Ç–æ–≥–æ –æ–ø—Ä–æ—Å–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏.
    *   **–•—Ä–∞–Ω–∏–ª–∏—â–µ:** –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `system_states` –≤ PostgreSQL. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ —Å–µ—Ä–≤–µ—Ä–∞.
    *   **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —Ä–µ–∂–∏–º–∞ –ß–° –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ **Audit Log**.

*   **RPi Controller:**
    *   **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –ü–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π —ç–º—É–ª—è—Ü–∏–µ–π –Ω–∞–ª–∏–≤–∞ (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è UID –∫–∞—Ä—Ç—ã) –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `check_emergency_stop()`.
    *   **–õ–æ–≥–∏–∫–∞:** –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ `GET /api/system/status`.
    *   **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:** –ï—Å–ª–∏ `emergency_stop == true` –ò–õ–ò –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–ª—é–±–∞—è —Å–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞** (—Ç–∞–π–º–∞—É—Ç, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞), —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `True`, –∏ –æ–ø–µ—Ä–∞—Ü–∏—è –Ω–∞–ª–∏–≤–∞ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è. –≠—Ç–æ fail-safe –º–µ—Ö–∞–Ω–∏–∑–º, prioritizing safety.

*   **Frontend (Admin App):**
    *   **UI:** –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "Dashboard" –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–º–µ—Ç–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "Activate/Deactivate Emergency Stop", —Ü–≤–µ—Ç –∏ —Ç–µ–∫—Å—Ç –∫–æ—Ç–æ—Ä–æ–π –º–µ–Ω—è—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –î–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º.
    *   **–°–æ—Å—Ç–æ—è–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π Svelte Store `systemStore.js`, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º **Polling**. –û–Ω –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç `GET /api/system/status` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–ª–∞–≥–∞.
    *   **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:** –í –∫–æ—Ä–Ω–µ–≤–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ `App.svelte` –¥–æ–±–∞–≤–ª–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω—ã–π, –Ω–µ–æ—Ç–∫–ª—é—á–∞–µ–º—ã–π –±–∞–Ω–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö, –µ—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.

### üìú 4.1.2 Audit Log

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∏–∑–º–µ–Ω—è—é—â–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

*   **Backend (DB):**
    *   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ `audit_logs` —Å –ø–æ–ª—è–º–∏ `log_id`, `timestamp`, `actor_id`, `action`.

*   **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (FastAPI):**
    *   **–ú–µ—Ö–∞–Ω–∏–∑–º:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –ø–æ–º–æ—â—å—é **FastAPI Dependencies** –∏ **Background Tasks**. –õ–æ–≥–∏–∫–∞ –∞—É–¥–∏—Ç–∞ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤–Ω—É—Ç—Ä–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `get_current_user` (`security.py`).
    *   **–ü—Ä–æ—Ü–µ—Å—Å:** –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (`POST`, `PUT`, `DELETE`) `get_current_user` –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ —Ñ–æ–Ω–æ–≤—É—é –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á—É –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥–µ.
    *   **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** –î–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å–µ—Å—Å–∏–π –ë–î, —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–µ—Ç —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é, –Ω–µ–∑–∞–≤–∏—Å–∏–º—É—é —Å–µ—Å—Å–∏—é `SessionLocal()`, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø–∏—Å—å, –¥–µ–ª–∞–µ—Ç `commit` –∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–µ—Å—Å–∏—é. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å –æ—Å–Ω–æ–≤–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π –∑–∞–ø—Ä–æ—Å–∞.
    *   **–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å:** –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –≤—Å–µ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è `print()` –±—ã–ª–∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–æ–¥—É–ª—å `logging`, –∞ –≤ `main.py` –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `logging.basicConfig`.

*   **Frontend:**
    *   –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞–ª—Å—è.
    *   **–í–∞–ª–∏–¥–∞—Ü–∏—è:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –º–µ—Ö–∞–Ω–∏–∑–º–∞ –±—ã–ª–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –ø—É—Ç–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö API-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –ø—Ä—è–º–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Ç–∞–±–ª–∏—Ü—ã `audit_logs` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

## 3. –û—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –ø–ª–∞–Ω–∞

–í —Ö–æ–¥–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –±—ã–ª–∏ —Å–¥–µ–ª–∞–Ω—ã –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è, –ø–æ–≤—ã—Å–∏–≤—à–∏–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.

1.  **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞—É–¥–∏—Ç–∞:** –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å `BackgroundTasks` –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å–µ—Å—Å–∏–∏ SQLAlchemy. –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø—É—Ç–µ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∑–∞–ø–∏—Å—å, –∞ –∑–∞—Ç–µ–º —Ä–µ—à–µ–Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π, –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏.
2.  **–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å (Logging):** –ü—Ä–æ–±–ª–µ–º–∞ —Å "–º–æ–ª—á–∞–Ω–∏–µ–º" —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –≤ –ª–æ–≥–∞—Ö –±—ã–ª–∞ —Ä–µ—à–µ–Ω–∞ –ø—É—Ç–µ–º –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ —Å `print()` –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–æ–¥—É–ª—å `logging` –∏ –µ–≥–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ `main.py`. –≠—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –ª—É—á—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π –¥–ª—è production-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
3.  **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞:** –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ "Emergency Stop" –Ω–∞ RPi –±—ã–ª–∞ —Å–¥–µ–ª–∞–Ω–∞ fail-safe: –ª—é–±–∞—è –æ—à–∏–±–∫–∞ —Å–µ—Ç–∏ —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ —Å–∏–≥–Ω–∞–ª –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º.
4.  **UX "Emergency Stop":** –ö–Ω–æ–ø–∫–∞ –Ω–∞ UI –±—ã–ª–∞ –¥–æ–ø–æ–ª–Ω–µ–Ω–∞ –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Å–ª—É—á–∞–π–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π.
5.  **–û—Ç–ª–∞–¥–∫–∞ —Å–±–æ—Ä–∫–∏ Admin App:** –í —Ö–æ–¥–µ —Ä–∞–±–æ—Ç –±—ã–ª–∞ —Ä–µ—à–µ–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ —Å–±–æ—Ä–∫–æ–π Tauri-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å–≤—è–∑–∞–Ω–Ω–∞—è —Å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ–º –≤–µ—Ä—Å–∏–π –ø–∞–∫–µ—Ç–æ–≤ –∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏–º `tauri-cli`. –≠—Ç–æ—Ç –æ–ø—ã—Ç –≤–∞–∂–µ–Ω –¥–ª—è –±—É–¥—É—â–µ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞.
6.  **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–Ω–∞ –±—É–¥—É—â–µ–µ):** –ë—ã–ª–æ –æ—Ç–º–µ—á–µ–Ω–æ, —á—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º Polling —è–≤–ª—è–µ—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º. –î–ª—è –±—É–¥—É—â–µ–π real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–µ–π –≤—ã–±—Ä–∞–Ω **WebSocket** –∏–∑-–∑–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Å–≤—è–∑–∏.

## 4. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (Definition of Done)

*   [‚úÖ] –§—É–Ω–∫—Ü–∏—è "Emergency Stop" –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ –Ω–∞–ª–∏–≤—ã –Ω–∞ RPi-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ.
*   [‚úÖ] Admin App –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç—É—Å "Emergency Stop" –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–º —É–ø—Ä–∞–≤–ª—è—Ç—å.
*   [‚úÖ] "Audit Log" –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç –≤—Å–µ `POST`, `PUT`, `DELETE` –∑–∞–ø—Ä–æ—Å—ã –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º.
*   [‚úÖ] –ó–∞–ø–∏—Å—å –≤ –ª–æ–≥ –∞—É–¥–∏—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –∏ –Ω–µ –∑–∞–º–µ–¥–ª—è–µ—Ç API.
*   [‚úÖ] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å–∫–≤–æ–∑–Ω—ã–º —Å—Ü–µ–Ω–∞—Ä–∏–µ–º (UI ‚Üí API ‚Üí DB / RPi ‚Üí API).

## 5. –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

*   –ü—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ **–§–∞–∑–µ 4.2: –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –µ–¥–∏–Ω–æ–π —Å–≤—è–∑–∫–µ.
*   –°–æ–∑–¥–∞—Ç—å UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ `AuditLog` (–∑–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `issues.csv`).
*   –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ (WebSocket) –≤–º–µ—Å—Ç–æ Polling (–∑–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `issues.csv`).

---
### **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç 4/6: `docs/api_coverage_phase4.1.md`**

# API Coverage Report ‚Äî Phase 4.1

–í —Ä–∞–º–∫–∞—Ö –§–∞–∑—ã 4.1 –±—ã–ª–∏ –¥–æ—Ä–∞–±–æ—Ç–∞–Ω—ã –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ API-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º–æ–π –∏ –∞—É–¥–∏—Ç–æ–º.

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä Request Body | –ü—Ä–∏–º–µ—Ä Response |
|---|---|---|---|---|---|
| `/api/system/status` | `GET` | –ù–µ—Ç | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–ª–∞–≥–∞ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏. –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —á–∞—Å—Ç–æ–≥–æ –æ–ø—Ä–æ—Å–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏. | N/A | `{"key": "emergency_stop_enabled", "value": "false"}` |
| `/api/system/emergency_stop`| `POST` | JWT Bearer | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ñ–ª–∞–≥–∞ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏. –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –∑–∞–ø–∏—Å—å –≤ `AuditLog`. | `{"value": "true"}` | `{"key": "emergency_stop_enabled", "value": "true"}` |
| (–õ—é–±–æ–π –∑–∞—â–∏—â–µ–Ω–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç) | `POST`, `PUT`, `DELETE` | JWT Bearer | (–ù–µ—è–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å) –í—ã–∑–æ–≤ –ª—é–±–æ–≥–æ –∏–∑ —ç—Ç–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∑–∞–ø–∏—Å–∏ –≤ `AuditLog`. | N/A | N/A |

---
### **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç 5/6: `docs/file_changes_phase4.1.md`**

# File-Level Change Summary ‚Äî Phase 4.1

| –§–∞–π–ª | –°–ª–æ–π | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
|---|---|---|---|
| `backend/main.py` | Backend | –ò–∑–º–µ–Ω–µ–Ω | –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `logging.basicConfig`. |
| `backend/api/system.py` | Backend | –ò–∑–º–µ–Ω–µ–Ω | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `GET /status` –∏ `POST /emergency_stop`. |
| `backend/api/guests.py` | Backend | –ò–∑–º–µ–Ω–µ–Ω | –Ø–≤–Ω–æ —É–∫–∞–∑–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `Depends(get_current_user)` –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∞—É–¥–∏—Ç–∞. |
| `backend/security.py` | Backend | –ò–∑–º–µ–Ω–µ–Ω | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è, –Ω–∞–¥–µ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞—É–¥–∏—Ç–∞ —á–µ—Ä–µ–∑ `BackgroundTasks` —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏ –ë–î. |
| `backend/crud/audit_crud.py` | Backend | –ò–∑–º–µ–Ω–µ–Ω | –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ª–æ–≥–∞ —Ç–µ–ø–µ—Ä—å —Å–∞–º–∞ –¥–µ–ª–∞–µ—Ç `commit` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `logging`. |
| `rpi-controller/main_controller.py`| RPi | –ò–∑–º–µ–Ω–µ–Ω | –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ `check_emergency_stop` –ø–µ—Ä–µ–¥ —ç–º—É–ª—è—Ü–∏–µ–π –Ω–∞–ª–∏–≤–∞. |
| `rpi-controller/sync_client.py`| RPi | –ò–∑–º–µ–Ω–µ–Ω | –î–æ–±–∞–≤–ª–µ–Ω–∞ fail-safe —Ñ—É–Ω–∫—Ü–∏—è `check_emergency_stop` –¥–ª—è –æ–ø—Ä–æ—Å–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞. |
| `admin-app/src/stores/systemStore.js`| Frontend (Svelte)| **–ù–æ–≤—ã–π** | –°–æ–∑–¥–∞–Ω —Å—Ç–æ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º—ã —Å –ª–æ–≥–∏–∫–æ–π Polling. |
| `admin-app/src/App.svelte` | Frontend (Svelte)| –ò–∑–º–µ–Ω–µ–Ω | –î–æ–±–∞–≤–ª–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω—ã–π –±–∞–Ω–Ω–µ—Ä "Emergency Stop". –£–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º `systemStore`. |
| `admin-app/src/routes/Dashboard.svelte`| Frontend (Svelte)| –ò–∑–º–µ–Ω–µ–Ω | –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è "Emergency Stop" –∏ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è. |
| `admin-app/src/components/common/Modal.svelte`| Frontend (Svelte)| –ò–∑–º–µ–Ω–µ–Ω | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ (`header`, `footer`). |
| `admin-app/src-tauri/src/api_client.rs`| Frontend (Rust) | –ò–∑–º–µ–Ω–µ–Ω | –î–æ–±–∞–≤–ª–µ–Ω—ã DTO –∏ —Ñ—É–Ω–∫—Ü–∏–∏ (`get_system_status`, `set_emergency_stop`) –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤. |
| `admin-app/src-tauri/src/main.rs`| Frontend (Rust) | –ò–∑–º–µ–Ω–µ–Ω | –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–æ–≤—ã–µ Tauri-–∫–æ–º–∞–Ω–¥—ã `get_system_status` –∏ `set_emergency_stop`. |

---
### **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç 6/6: `docs/phase-4.1-issues.csv`**

```csv
title,description,"labels",estimate
"Refactor Controller Status Check to use WebSockets","Current Emergency Stop check uses HTTP Polling. This should be replaced with a WebSocket connection for true real-time updates and reduced server load. This will also allow the server to monitor the controller's online status.","tech-debt,enhancement,rpi-controller",M
"Create UI for Viewing Audit Log","Create a new read-only page in the Admin App to display entries from the Audit Log table. Add filtering by date and actor.","feature,frontend",M
"Add 'Reason' field to Emergency Stop","Enhance the Emergency Stop feature to include a mandatory 'reason' text field upon activation. This reason should be stored in the Audit Log for accountability.","feature,backend,frontend",S
"Implement Centralized Notification System","Refactor all `alert()` calls and error props into a global `notificationStore` and a `Toast.svelte` component to display non-blocking success/error messages across the app.","enhancement,ux",M
"Apply Explicit Dependency Pattern for Audit Log","Go through all remaining API routers (`taps.py`, `kegs.py`, etc.) and apply the explicit dependency pattern (`current_user: ... = Depends(...)`) to ensure all state-changing endpoints are correctly audited.","tech-debt,backend",L
```