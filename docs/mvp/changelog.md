# Changelog: История ключевых решений

Этот документ отслеживает основные архитектурные и технологические решения, принятые в ходе разработки MVP.

### **Октябрь 2025**

-   **`2025-10-14` - Внедрение системы интеграционного тестирования**
    -   **Решение:** Принять архитектуру тестов на основе `pytest` и `SQLite` в памяти.
    -   **Обоснование:** Обеспечивает мгновенную обратную связь для разработчиков и полную изоляцию тестов.
    -   **Следствие:** Проведен значительный рефакторинг моделей (`models.py`) для обеспечения база-агностичности (отказ от нативных функций UUID PostgreSQL) и `main.py` (удаление `create_all` из кода приложения).

-   **`2025-10-13` - Завершение разработки системных модулей**
    -   **Решение:** Реализованы модули управления контроллерами, экстренной остановки и автоматического аудита.
    -   **Обоснование:** Эти модули превращают API в управляемую и прозрачную платформу, готовую к масштабированию.
    -   **Следствие:** В `main.py` добавлено Middleware для аудита.

-   **`2025-10-12` - Выбор технологического стека для Admin App**
    -   **Решение:** Отказаться от веб-приложения на React (`admin-ui/`) в пользу десктопного приложения на Tauri + Svelte (`admin-app/`).
    -   **Обоснование:** Необходимо было обеспечить прямой доступ к USB NFC-считывателю (ACR122U) с рабочего места бармена, что крайне затруднительно из браузера. Tauri элегантно решает эту проблему.
    -   **Следствие:** Репозиторий `nfc-prototype` был использован как технологическая основа для нового `admin-app`.

-   **`2025-10-11` - Принятие ключевых архитектурных принципов**
    -   **Решение:** Формализованы и приняты как стандарт проекта принципы: Разделение сущностей, Конечные автоматы, Транзакционная целостность, Идемпотентность, "Жадная загрузка".
    -   **Обоснование:** Обеспечение долгосрочной поддерживаемости, масштабируемости и надежности системы.