# backend/Dockerfile

# Шаг 1: Используем официальный образ Python как базовый.
FROM python:3.11-slim

# Шаг 2: Устанавливаем рабочую директорию внутри контейнера.
WORKDIR /app

# Шаг 3: Копируем файл с зависимостями.
# Копируем 'requirements.txt' из корня контекста.
COPY requirements.txt .

# Шаг 4: Устанавливаем зависимости.
RUN pip install --no-cache-dir -r requirements.txt

# Шаг 5: Копируем весь исходный код.
# Копируем всё из корня контекста в рабочую директорию /app.
COPY . .

# Шаг 6: Указываем команду по умолчанию для запуска контейнера.
# Docker Compose может переопределить эту команду, но она делает образ самодостаточным.
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000", "--reload"]