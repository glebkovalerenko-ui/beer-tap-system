def test_unauthorized_access_to_protected_route(client):
    """
    Проверяем, что защищенный эндпоинт (`/api/kegs/`) возвращает ошибку 401 Unauthorized
    при попытке доступа без JWT-токена.
    
    Этот тест подтверждает, что наша система безопасности и фикстура `client` работают.
    """
    # 1. Выполняем GET-запрос к защищенному эндпоинту с помощью фикстуры `client`.
    #    Никаких заголовков аутентификации мы не передаем.
    response = client.get("/api/kegs/")
    
    # 2. Проверяем, что сервер вернул ожидаемый код состояния.
    #    `assert` - это стандартная инструкция Python. Если условие ложно, тест провалится.
    assert response.status_code == 401
    
    # 3. (Опционально, но рекомендуется) Проверяем тело ответа, чтобы быть
    #    уверенными, что это именно та ошибка, которую мы ожидаем.
    assert response.json() == {"detail": "Could not validate credentials"}